<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medipiel | Dermatolog√≠a Premium</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="parcial2.css">
</head>

<body>
<!-- Barra de promoci√≥n -->
<div class="promo-bar">
    <p>¬°Env√≠o gratis en compras mayores a $50.000! üöö</p>
</div>

<!-- Navbar -->
<header id="navbar">
    <nav>
        <div class="nav-left">
            <ul>
                <li><a href="#">Inicio</a></li>
                <li><a href="#productos">Productos</a></li>
                <li><a href="#testimonios">Testimonios</a></li>
                <li><a href="#" class="btn-mayoristas" id="btn-mayoristas">Mayoristas</a></li>
            </ul>
        </div>
        
        <div class="logo">
            <img src="img/logo.png" alt="Logo Medipiel">
        </div>
        
        <div class="nav-right">
            <ul>
                <li><a href="#contacto">Contacto</a></li>
                <li>
                    <a href="#" class="carrito">
                        üõí <span class="carrito-count">0</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<!-- Carrusel -->
<div class="carrusel">
    <div class="carrusel-inner" id="carrusel-inner">
        <div class="carrusel-item">
            <img src="img/carru1.jpg" alt="promo">
        </div>
        <div class="carrusel-item">
            <img src="img/carru2.jpg" alt="serum">
        </div>
        <div class="carrusel-item">
            <img src="img/carru3.jpg" alt="pelo">
        </div>
    </div>
    <button class="carrusel-control prev" onclick="moveSlide(-1)">‚ùÆ</button>
    <button class="carrusel-control next" onclick="moveSlide(1)">‚ùØ</button>
    <div class="carrusel-dots" id="carrusel-dots"></div>
</div>

<!-- Secciones de categor√≠as -->
<div class="categorias">
    <div class="categoria active" data-categoria="all">
        <i class="fas fa-star"></i>
        <h3>Todos</h3>
        <p>Descubre nuestra gama completa de productos</p>
    </div>
    <div class="categoria" data-categoria="hidratacion">
        <i class="fas fa-tint"></i>
        <h3>Hidrataci√≥n</h3>
        <p>Productos para mantener tu piel hidratada</p>
    </div>
    <div class="categoria" data-categoria="limpieza">
        <i class="fas fa-soap"></i>
        <h3>Limpieza</h3>
        <p>Limpiadores suaves para todo tipo de piel</p>
    </div>
    <div class="categoria" data-categoria="reparacion">
        <i class="fas fa-heart"></i>
        <h3>Reparaci√≥n</h3>
        <p>Tratamientos para pieles da√±adas</p>
    </div>
    <div class="categoria" data-categoria="perfumeria">
        <i class="fas fa-spray-can"></i>
        <h3>Perfumer√≠a</h3>
        <p>Fragancias exclusivas para tu piel</p>
    </div>
</div>

<!-- Productos -->
<section class="productos" id="productos">
    <h2>Nuestros Productos Destacados</h2>

    <div class="contenedor-productos-y-filtros">
        <!-- Contenedor de filtros -->
        <div class="filtros-container">
            <button class="btn-toggle-filtros" id="toggle-filtros">
                <i class="fas fa-filter"></i> Filtros
            </button>
            
            <div class="filtros-contenido" id="filtros-contenido">
                <!-- Filtro por marca -->
                <div class="filtro-grupo">
                    <h4>Marcas</h4>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="marca-la-roche" data-filtro="marca" value="La Roche" checked>
                        <label for="marca-la-roche">La Roche-Posay</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="marca-cerave" data-filtro="marca" value="CeraVe" checked>
                        <label for="marca-cerave">CeraVe</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="marca-bioderma" data-filtro="marca" value="Bioderma" checked>
                        <label for="marca-bioderma">Bioderma</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="marca-skinceuticals" data-filtro="marca" value="Skinceuticals" checked>
                        <label for="marca-skinceuticals">Skinceuticals</label>
                    </div>
                </div>
                    <!-- Marcas de perfumes (nuevas) -->
                <div class="filtro-opcion">
                    <input type="checkbox" id="marca-lancome" data-filtro="marca" value="Lancome" checked>
                    <label for="marca-lancome">Lanc√¥me</label>
                </div>
                <div class="filtro-opcion">
                    <input type="checkbox" id="marca-carolina-herrera" data-filtro="marca" value="Carolina Herrera" checked>
                    <label for="marca-carolina-herrera">Carolina Herrera</label>
                </div>

                <!-- Filtro por precio -->
                <div class="filtro-grupo">
                    <h4>Precio</h4>
                    <div class="precio-rango">
                        <input type="number" id="precio-min-productos" placeholder="M√≠nimo" value="0">
                        <span>-</span>
                        <input type="number" id="precio-max-productos" placeholder="M√°ximo" value="500000">
                    </div>
                </div>
                
                <!-- Filtro por tipo de piel -->
                <div class="filtro-grupo">
                    <h4>Tipo de Piel</h4>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="piel-seca-productos" data-filtro="piel" value="seca" checked>
                        <label for="piel-seca-productos">Seca</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="piel-grasa-productos" data-filtro="piel" value="grasa" checked>
                        <label for="piel-grasa-productos">Grasa</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="piel-mixta-productos" data-filtro="piel" value="mixta" checked>
                        <label for="piel-mixta-productos">Mixta</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="piel-sensible-productos" data-filtro="piel" value="sensible" checked>
                        <label for="piel-sensible-productos">Sensible</label>
                    </div>
                </div>
                
                <!-- Filtro por beneficios -->
                <div class="filtro-grupo">
                    <h4>Beneficios</h4>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="beneficio-hidratacion-productos" data-filtro="beneficio" value="hidratacion" checked>
                        <label for="beneficio-hidratacion-productos">Hidrataci√≥n</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="beneficio-antiedad-productos" data-filtro="beneficio" value="antiedad" checked>
                        <label for="beneficio-antiedad-productos">Antiedad</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="beneficio-acne-productos" data-filtro="beneficio" value="acne" checked>
                        <label for="beneficio-acne-productos">Control de acn√©</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="beneficio-manchas-productos" data-filtro="beneficio" value="manchas" checked>
                        <label for="beneficio-manchas-productos">Reducci√≥n de manchas</label>
                    </div>
                </div>
                <div class="filtro-grupo">
                    <h4>Familia Olfativa</h4>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="fragancia-dulce" data-filtro="fragancia" value="dulce" checked>
                        <label for="fragancia-dulce">Dulce</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="fragancia-citrico" data-filtro="fragancia" value="citrico" checked>
                        <label for="fragancia-citrico">C√≠trico</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="fragancia-floral" data-filtro="fragancia" value="floral" checked>
                        <label for="fragancia-floral">Floral</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="fragancia-amaderado" data-filtro="fragancia" value="amaderado" checked>
                        <label for="fragancia-amaderado">Amaderado</label>
                    </div>
                    <div class="filtro-opcion">
                        <input type="checkbox" id="fragancia-oriental" data-filtro="fragancia" value="oriental" checked>
                        <label for="fragancia-oriental">Oriental</label>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Contenedor de productos -->
        <div class="grid-productos">
            <!-- Producto individual (repetir este patr√≥n para cada producto) -->
            <div class="producto" data-categorias="hidratacion" data-marca="La Roche" data-piel="grasa,mixta" data-beneficio="hidratacion,acne" data-precio="162000"
            data-descripcion="Reduce los poros y el flujo de sebo, manteniendo a piel mate. Ideal para piel grasa con brillo persistente.">

                <!-- Contenido visible -->
                <img src="img/Hidra1.png" alt="Crema Hidratante">
                <h3>Hidratante Facial Anti-brillo Effaclar Matificante</h3>
                <div class="precio">$162.000</div>
                <!-- Botones -->
                <div class="cantidad-container">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" class="cantidad-input" value="1" min="1">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
                <button class="btn-producto">A√±adir al carrito</button>
            </div>

            <div class="producto" data-categorias="hidratacion proteccion_solar" data-marca="ISDIN" data-piel="grasa,mixta,sensible" data-beneficio="hidratacion" data-precio="138000"
            data-descripcion="Fotoprotector facial diario SPF 50, ultraligero, no graso, con √°cido hialur√≥nico, vitamina E y alga antioxidante. Hidrata y protege intensamente.">

                <img src="img/procter1.png" alt="Protector Solar">
                <h3>Fotoprotector Fusion Water Magic Oil Control</h3>
                <div class="precio">$138.000</div>

                <div class="cantidad-container">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" class="cantidad-input" value="1" min="1">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
                <button class="btn-producto">A√±adir al carrito</button>
            </div>


            <div class="producto" data-categorias="reparacion antiedad" data-marca="Skinceuticals" data-piel="seca,mixta" data-beneficio="antiedad" data-precio="531000"
            data-descripcion="Rellena la piel, mejora la luminosidad y redefine el contorno facial">

                <img src="img/serum1.png" alt="Serum ">
                <h3>HA Intensifier Multi-Glycan - Skinceuticals 30 ml</h3>
                <div class="precio">$531.000</div>

                <div class="cantidad-container">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" class="cantidad-input" value="1" min="1">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
                <button class="btn-producto">A√±adir al carrito</button>
            </div>

            <div class="producto" data-categorias="limpieza" data-marca="CeraVe" data-piel="seca,sensible" data-beneficio="hidratacion" data-precio="106000"
            data-descripcion="Elimina el exceso de grasa, suciedad y maquillaje contiene ceramidas, √°cido hialur√≥nico y niacinamida para ayudar a restaurar la barrera de la piel, atraer la hidrataci√≥n de la piel.">

                <img src="img/limpi1.png" alt="limpiador">
                <h3>Gel Limpiador Espumoso - CeraVe 473 ml</h3>
                <div class="precio">$106.000</div>

                <div class="cantidad-container">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" class="cantidad-input" value="1" min="1">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
                <button class="btn-producto">A√±adir al carrito</button>
            </div>

            <div class="producto" data-categorias="reparacion" data-marca="La Roche" data-piel="grasa,mixta" data-beneficio="acne" data-precio="165000"
            data-descripcion="Corrector triple anti-imperfecciones para pieles grasas y con tendencia a las imperfecciones">
                
                <img src="img/anti1.png" alt="Crema Reparadora">
                <h3>Tratamiento Anti-imperfeccciones Effaclar Duo+M</h3>
                <div class="precio">$165.000</div>
                
                <div class="cantidad-container">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" class="cantidad-input" value="1" min="1">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
                <button class="btn-producto">A√±adir al carrito</button>
            </div>

            <div class="producto" data-categorias="limpieza" data-marca="Bioderma" data-piel="sensible" data-beneficio="hidratacion" data-precio="167000"
            data-descripcion="Agua micelar limpiadora Bioderma que cuida tu piel sensible. Para piel normal a sensible. Su f√≥rmula con extracto de pepino es ideal para descongestionar. No requiere enjuague.">
                
                <img src="img/aguamic1.png" alt="Agua Micelar">
                <h3>Sensibio H2O Agua Micelar - Bioderma 500 ml</h3>
                <div class="precio">$167.000</div>

                <div class="cantidad-container">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" class="cantidad-input" value="1" min="1">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
                <button class="btn-producto">A√±adir al carrito</button>
            </div>

            <div class="producto" data-categorias="hidratacion" data-marca="Beauty Treats" data-piel="seca" data-beneficio="hidratacion" data-precio="58000"
            data-descripcion="Hidrataci√≥n intensa que tu piel para cuando se ve apagada, deshidratada y sin vitalidad. Mascarilla automoldeable, enriquecida con √°cido hialur√≥nico y col√°geno.">
                
                <img src="img/mas1.png" alt="Mascarilla Hidratante">
                <h3>Beauty Treats Mascarilla facial hidratante Hyaluronic</h3>
                <div class="precio">$58.000</div>

                <div class="cantidad-container">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" class="cantidad-input" value="1" min="1">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
                <button class="btn-producto">A√±adir al carrito</button>
            </div>

            <div class="producto" data-categorias="perfumeria" data-marca="Lancome" data-fragancia="dulce" data-piel="todas" data-beneficio="perfume" data-precio="921000"
            data-descripcion="El olor de la felicidad, un ramo floral gourmet envuelto en una sonrisa de cristal. Un s√≠mbolo universal de felicidad y feminidad alegre. Mezclando los ingredientes m√°s nobles.">
                
                <img src="img/perfu2.png" alt="Perfume Natural">
                <h3>Perfume mujer La Vida es Belle - Lanc√¥me 100 ml</h3>
                <div class="precio">$921.000</div>

                <div class="cantidad-container">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" class="cantidad-input" value="1" min="1">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
                <button class="btn-producto">A√±adir al carrito</button>
            </div>

            <div class="producto" data-categorias="perfumeria"  data-marca="Carolina Herrera" 
            data-fragancia="citrico"  data-piel="todas" data-beneficio="perfume" data-precio="546000"
            data-descripcion="Versi√≥n intensa y ambarada de 212 VIP Black, con notas de lavanda, regaliz y vainilla negra. Un elixir audaz que expresa confianza y singularidad.">
                
                <img src="img/perfu1.png" alt="Perfume Natural">
                <h3>Perfume 212 VIP Black Elixir EDP Elixir- Carolina Herrera 100 ml</h3>
                <div class="precio">$546.000</div>

                <div class="cantidad-container">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" class="cantidad-input" value="1" min="1">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
                <button class="btn-producto">A√±adir al carrito</button>
            </div>
        </div>
        </div>
    </div>
</section>
<!-- √çcono flotante de cotizaci√≥n -->
<div class="cotizacion-float" id="iconoCotizacion">
    üìù <span class="cotizacion-count">0</span>
  </div>
  
  <!-- Modal de Cotizaci√≥n -->
  <div class="modal" id="modalCotizacion">
    <div class="modal-content">
      <span class="close" onclick="cerrarCotizacion()">&times;</span>
      <h2>Resumen de Cotizaci√≥n</h2>
  
      <div id="resumenCotizacion"></div>
  
      <h3>Datos del Cliente</h3>
      <form id="formCotizacion" class="form-cotizacion">
        <div class="form-group">
          <label>Nombre completo:</label>
          <input type="text" required name="nombre">
        </div>
        <div class="form-group">
          <label>Correo electr√≥nico:</label>
          <input type="email" required name="correo">
        </div>
        <div class="form-group">
          <label>Tel√©fono:</label>
          <input type="tel" required name="telefono">
        </div>
        <div class="form-group full-width">
          <label>Mensaje adicional:</label>
          <textarea rows="3" name="mensaje"></textarea>
        </div>
        <div class="form-group full-width">
          <strong>Total Cotizaci√≥n: </strong><span id="totalCotizacion">$0</span>
        </div>
        <div class="form-group full-width">
          <button type="submit" class="btn-producto">Finalizar Cotizaci√≥n</button>
        </div>
      </form>
    </div>
</div>
  
  
<!-- Secci√≥n Mayoristas -->
<section class="mayoristas-section" id="mayoristas-section">
    <h2>Promociones al por Mayor</h2>
    
    <div class="beneficios-mayoristas">
        <div class="beneficio">
            <i class="fas fa-percentage"></i>
            <h3>Descuentos Exclusivos</h3>
            <p>Obt√©n descuentos especiales desde el 20% al 40% seg√∫n volumen de compra.</p>
        </div>
        
        <div class="beneficio">
            <i class="fas fa-truck"></i>
            <h3>Env√≠os Gratis</h3>
            <p>Env√≠o gratuito en pedidos superiores a $500.000 en todo el pa√≠s.</p>
        </div>
    </div>

    <!-- Filtros para mayoristas -->
    <div class="contenedor-productos-y-filtros">
    
    <div class="filtros-container">
        <button class="btn-toggle-filtros" id="toggle-filtros-mayoristas">
            <i class="fas fa-filter"></i> Filtros
        </button>
        
        <div class="filtros-contenido" id="filtros-contenido-mayoristas">
            <!-- Filtros b√°sicos -->
                        <div class="filtro-grupo">
                            <h4>Marcas</h4>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="marca-medipiel" data-filtro="marca" value="Medipiel" checked>
                                <label for="marca-medipiel">Medipiel</label>
                            </div>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="marca-dermacare" data-filtro="marca" value="Dermacare" checked>
                                <label for="marca-dermacare">Dermacare</label>
                            </div>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="marca-skinpro" data-filtro="marca" value="SkinPro" checked>
                                <label for="marca-skinpro">SkinPro</label>
                            </div>
                        </div>
                        
                        <div class="filtro-grupo">
                            <h4>Precio por unidad</h4>
                            <div class="precio-rango">
                                <input type="number" id="precio-min-mayoristas" placeholder="M√≠nimo" value="0">
                                <span>-</span>
                                <input type="number" id="precio-max-mayoristas" placeholder="M√°ximo" value="100000">
                            </div>
                        </div>
                        
                        <!-- Nuevos filtros especiales -->
                        <div class="filtro-grupo">
                            <h4>Categor√≠as Especiales</h4>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="mas-vendidos" data-filtro="especial" value="mas_vendidos">
                                <label for="mas-vendidos">üî• M√°s Vendidos</label>
                            </div>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="kits-inicio" data-filtro="especial" value="kit_inicio">
                                <label for="kits-inicio">üöÄ Kits para Empezar</label>
                            </div>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="ofertas-especiales" data-filtro="especial" value="oferta_especial">
                                <label for="ofertas-especiales">üíé Ofertas Exclusivas</label>
                            </div>
                        </div>
                        
                        <div class="filtro-grupo">
                            <h4>Tipo de Producto</h4>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="producto-facial" data-filtro="tipo" value="facial" checked>
                                <label for="producto-facial">Facial</label>
                            </div>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="producto-corporal" data-filtro="tipo" value="corporal" checked>
                                <label for="producto-corporal">Corporal</label>
                            </div>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="producto-capilar" data-filtro="tipo" value="capilar" checked>
                                <label for="producto-capilar">Capilar</label>
                            </div>
                            <div class="filtro-opcion">
                                <input type="checkbox" id="producto-kit" data-filtro="tipo" value="kit" checked>
                                <label for="producto-kit">Kits</label>
                            </div>
                        </div>
                        
                        <div class="filtro-grupo">
                            <h4>Volumen M√≠nimo</h4>
                            <div class="filtro-opcion">
                                <input type="radio" name="volumen" id="volumen-bajo" data-filtro="volumen" value="10" checked>
                                <label for="volumen-bajo">10+ unidades</label>
                            </div>
                            <div class="filtro-opcion">
                                <input type="radio" name="volumen" id="volumen-medio" data-filtro="volumen" value="50">
                                <label for="volumen-medio">50+ unidades</label>
                            </div>
                            <div class="filtro-opcion">
                                <input type="radio" name="volumen" id="volumen-alto" data-filtro="volumen" value="100">
                                <label for="volumen-alto">100+ unidades</label>
                            </div>
                        </div>
        </div>
    </div>

    <div class="promociones-mayoristas">
    <!-- 1. Productos m√°s vendidos -->
            <div class="promocion" data-marca="Medipiel" data-especial="mas_vendidos" data-tipo="facial" data-volumen="10,50,100" data-precio="17500">
                <div class="badge">-30% ‚òÖ</div>
                <img src="https://images.unsplash.com/photo-1556228578-8c89e6adf883?ixlib=rb-1.2.1&auto=format&fit=crop&w=250&q=80" alt="Crema Hidratante">
                <h3>Crema Hidratante Premium</h3>
                <div class="precio-normal">$25.000</div>
                <div class="precio-mayorista">$17.500</div>
                
                <div class="cantidad-promo-container">
                    <label for="cantidad-crema">Cantidad:</label>
                    <select id="cantidad-crema" class="selector-cantidad" data-producto="Crema Hidratante">
                        <option value="10-29" data-precio="20000">10-29 uds ($20.000)</option>
                        <option value="30-49" data-precio="17500" selected>30-49 uds ($17.500)</option>
                        <option value="50-99" data-precio="15000">50-99 uds ($15.000)</option>
                        <option value="100+" data-precio="12500">100+ uds ($12.500)</option>
                    </select>
                    
                    <div class="niveles-promo">
                        <div class="nivel-promo" data-min="10" data-max="29">10+</div>
                        <div class="nivel-promo active" data-min="30" data-max="49">30+</div>
                        <div class="nivel-promo" data-min="50" data-max="99">50+</div>
                        <div class="nivel-promo" data-min="100">100+</div>
                    </div>
                </div>
                
                <p class="condiciones">Producto estrella - Rotaci√≥n garantizada</p>
                <div class="botones-promo">
                    <button class="btn-producto btn-carrito">A√±adir al carrito</button>
                    <button class="btn-producto btn-cotizacion">Solicitar Cotizaci√≥n</button>
                </div>
                  
            </div>
        
            <!-- 2. Kit para iniciar -->
            <div class="promocion" data-marca="Medipiel" data-especial="kit_inicio" data-tipo="kit" data-volumen="10" data-precio="120000">
                <div class="badge">Kit Inicio ‚òÖ</div>
                <img src="https://images.unsplash.com/photo-1596755094514-f87e34085b2c?ixlib=rb-1.2.1&auto=format&fit=crop&w=250&q=80" alt="Kit Profesional">
                <h3>Kit Inicial Est√©tica Facial</h3>
                <div class="precio-normal">$180.000</div>
                <div class="precio-mayorista">$120.000</div>
                
                <div class="cantidad-promo-container">
                    <label for="cantidad-kit">Cantidad:</label>
                    <select id="cantidad-kit" class="selector-cantidad" data-producto="Kit Inicial">
                        <option value="5-9" data-precio="140000">5-9 kits ($140.000)</option>
                        <option value="10-19" data-precio="120000" selected>10-19 kits ($120.000)</option>
                        <option value="20+" data-precio="100000">20+ kits ($100.000)</option>
                    </select>
                    
                    <div class="niveles-promo">
                        <div class="nivel-promo" data-min="5" data-max="9">5+</div>
                        <div class="nivel-promo active" data-min="10" data-max="19">10+</div>
                        <div class="nivel-promo" data-min="20">20+</div>
                    </div>
                </div>
                
                <p class="condiciones">Incluye: Limpiador, Tonico, Crema d√≠a/noche y Serum</p>
                <div class="botones-promo">
                    <button class="btn-producto btn-carrito">A√±adir al carrito</button>
                    <button class="btn-producto btn-cotizacion">Solicitar Cotizaci√≥n</button>
                </div>
            </div>
        
            <!-- 3. Oferta exclusiva -->
            <div class="promocion" data-marca="Dermacare" data-especial="oferta_especial" data-tipo="corporal" data-volumen="50,100" data-precio="9000">
                <div class="badge">Exclusivo ‚òÖ</div>
                <img src="https://images.unsplash.com/photo-1625772452859-1c03d5bf1137?ixlib=rb-1.2.1&auto=format&fit=crop&w=250&q=80" alt="Jab√≥n Dermatol√≥gico">
                <h3>Jab√≥n Corporal Detox</h3>
                <div class="precio-normal">$15.000</div>
                <div class="precio-mayorista">$9.000</div>
                
                <div class="cantidad-promo-container">
                    <label for="cantidad-jabon">Cantidad:</label>
                    <select id="cantidad-jabon" class="selector-cantidad" data-producto="Jab√≥n Corporal">
                        <option value="50-99" data-precio="10000">50-99 uds ($10.000)</option>
                        <option value="100-199" data-precio="9000" selected>100-199 uds ($9.000)</option>
                        <option value="200+" data-precio="7500">200+ uds ($7.500)</option>
                    </select>
                    
                    <div class="niveles-promo">
                        <div class="nivel-promo" data-min="50" data-max="99">50+</div>
                        <div class="nivel-promo active" data-min="100" data-max="199">100+</div>
                        <div class="nivel-promo" data-min="200">200+</div>
                    </div>
                </div>
                
                <p class="condiciones">Edici√≥n limitada - Solo para mayoristas</p>
                <div class="botones-promo">
                    <button class="btn-producto btn-carrito">A√±adir al carrito</button>
                    <button class="btn-producto btn-cotizacion">Solicitar Cotizaci√≥n</button>
                </div>
            </div>
        
            <!-- 4. Producto m√°s vendido -->
            <div class="promocion" data-marca="SkinPro" data-especial="mas_vendidos" data-tipo="facial" data-volumen="10,50,100" data-precio="35000">
                <div class="badge">Best Seller ‚òÖ</div>
                <img src="https://images.unsplash.com/photo-1571781926291-c477ebfd024b?ixlib=rb-1.2.1&auto=format&fit=crop&w=250&q=80" alt="Serum Vitamina C">
                <h3>Serum Iluminador Vitamina C</h3>
                <div class="precio-normal">$50.000</div>
                <div class="precio-mayorista">$35.000</div>
                
                <div class="cantidad-promo-container">
                    <label for="cantidad-serum">Cantidad:</label>
                    <select id="cantidad-serum" class="selector-cantidad" data-producto="Serum Vitamina C">
                        <option value="10-24" data-precio="40000">10-24 uds ($40.000)</option>
                        <option value="25-49" data-precio="35000" selected>25-49 uds ($35.000)</option>
                        <option value="50+" data-precio="30000">50+ uds ($30.000)</option>
                    </select>
                    
                    <div class="niveles-promo">
                        <div class="nivel-promo" data-min="10" data-max="24">10+</div>
                        <div class="nivel-promo active" data-min="25" data-max="49">25+</div>
                        <div class="nivel-promo" data-min="50">50+</div>
                    </div>
                </div>
                
                <p class="condiciones">Producto m√°s solicitado en 2023</p>
                <div class="botones-promo">
                    <button class="btn-producto btn-carrito">A√±adir al carrito</button>
                    <button class="btn-producto btn-cotizacion">Solicitar Cotizaci√≥n</button>
                </div>
            </div>
        
            <!-- 5. Kit para iniciar -->
            <div class="promocion" data-marca="Dermacare" data-especial="kit_inicio" data-tipo="kit" data-volumen="10" data-precio="85000">
                <div class="badge">Kit Spa ‚òÖ</div>
                <img src="https://images.unsplash.com/photo-1591088398332-8a7791972803?ixlib=rb-1.2.1&auto=format&fit=crop&w=250&q=80" alt="Kit Spa">
                <h3>Kit B√°sico Spa Facial</h3>
                <div class="precio-normal">$120.000</div>
                <div class="precio-mayorista">$85.000</div>
                
                <div class="cantidad-promo-container">
                    <label for="cantidad-spa">Cantidad:</label>
                    <select id="cantidad-spa" class="selector-cantidad" data-producto="Kit Spa">
                        <option value="5-9" data-precio="95000">5-9 kits ($95.000)</option>
                        <option value="10-19" data-precio="85000" selected>10-19 kits ($85.000)</option>
                        <option value="20+" data-precio="75000">20+ kits ($75.000)</option>
                    </select>
                    
                    <div class="niveles-promo">
                        <div class="nivel-promo" data-min="5" data-max="9">5+</div>
                        <div class="nivel-promo active" data-min="10" data-max="19">10+</div>
                        <div class="nivel-promo" data-min="20">20+</div>
                    </div>
                </div>
                
                <p class="condiciones">Perfecto para nuevos centros de est√©tica</p>
                <div class="botones-promo">
                    <button class="btn-producto btn-carrito">A√±adir al carrito</button>
                    <button class="btn-producto btn-cotizacion">Solicitar Cotizaci√≥n</button>
                </div>
            </div>
        
            <!-- 6. Oferta exclusiva -->
            <div class="promocion" data-marca="Medipiel" data-especial="oferta_especial" data-tipo="capilar" data-volumen="50,100" data-precio="12000">
                <div class="badge">Exclusivo ‚òÖ</div>
                <img src="https://images.unsplash.com/photo-1600334129128-685c5582fd35?ixlib=rb-1.2.1&auto=format&fit=crop&w=250&q=80" alt="Shampoo Reconstrucci√≥n">
                <h3>Shampoo Reconstructor Capilar</h3>
                <div class="precio-normal">$18.000</div>
                <div class="precio-mayorista">$12.000</div>
                
                <div class="cantidad-promo-container">
                    <label for="cantidad-shampoo">Cantidad:</label>
                    <select id="cantidad-shampoo" class="selector-cantidad" data-producto="Shampoo Reconstructor">
                        <option value="50-99" data-precio="13000">50-99 uds ($13.000)</option>
                        <option value="100-199" data-precio="12000" selected>100-199 uds ($12.000)</option>
                        <option value="200+" data-precio="10000">200+ uds ($10.000)</option>
                    </select>
                    
                    <div class="niveles-promo">
                        <div class="nivel-promo" data-min="50" data-max="99">50+</div>
                        <div class="nivel-promo active" data-min="100" data-max="199">100+</div>
                        <div class="nivel-promo" data-min="200">200+</div>
                    </div>
                </div>
                
                <p class="condiciones">F√≥rmula profesional - Oferta por tiempo limitado</p>
                <div class="botones-promo">
                    <button class="btn-producto btn-carrito">A√±adir al carrito</button>
                    <button class="btn-producto btn-cotizacion">Solicitar Cotizaci√≥n</button>
                </div>
            </div>
    </div>
</section>

<!-- Secci√≥n de Testimonios -->
<section class="testimonios" id="testimonios">
    <h2>Lo que dicen nuestros clientes</h2>
    <div class="testimonios-grid">
        <div class="testimonio-card">
            <img src="img/testimonio1.jpg" alt="Mar√≠a Gonz√°lez">
            <h4>Mar√≠a Gonz√°lez</h4>
            <!--<p class="antiguedad">Paciente desde 2020</p>-->
            <p class="comentario">"La crema hidratante cambi√≥ mi piel completamente. Ahora luce radiante y sin irritaciones."</p>
        </div>
        <div class="testimonio-card">
            <img src="img/testimonio2.jpg" alt="Carlos Mart√≠nez">
            <h4>Carlos Mart√≠nez</h4>
            <p class="comentario">"El protector solar es lo mejor que he usado. No deja sensaci√≥n grasosa y protege todo el d√≠a."</p>
        </div>
        <div class="testimonio-card">
            <img src="img/testimonio3.jpg" alt="Ana Rodr√≠guez">
            <h4>Ana Rodr√≠guez</h4>
            <p class="comentario">"El serum antiedad redujo mis arrugas en solo 4 semanas. ¬°Incre√≠bles resultados!"</p>
        </div>
    </div>
</section>


<!-- Footer con Mapa Integrado -->
<footer id="contacto">
    <div class="footer-content">
        <div class="footer-column">
            <h3>Contacto</h3>
            <ul>
                <li>üìû +57 123 456 7890</li>
                <li>‚úâÔ∏è info@medipiel.com</li>
                <li>üìç Calle 123 #45-67, Bogot√°</li>
            </ul>
        </div>
        <div class="footer-column">
            <h3>Horario</h3>
            <ul>
                <li>Lunes a Viernes: 8am - 6pm</li>
                <li>S√°bados: 9am - 2pm</li>
                <li>Domingos: Cerrado</li>
            </ul>
        </div>
        <div class="footer-column">
            <h3>Redes Sociales</h3>
            <div class="social-icons">
                <a href="https://www.instagram.com/medipiel/?hl=es" target="_blank" class="icon">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.youtube.com/@Medipiel_" target="_blank" class="icon">
                    <i class="fab fa-youtube"></i>
                </a>
                <a href="https://www.tiktok.com/@medipiel?lang=es" target="_blank" class="icon">
                    <i class="fab fa-tiktok"></i>
                </a>
                <a href="https://www.facebook.com/Medipielsa/?locale=es_LA" target="_blank" class="icon">
                    <i class="fab fa-facebook-f"></i>
                </a>
            </div>
        </div>

        <!-- Contenedor del Mapa -->
        <div class="footer-mapa-container">
            <iframe class="footer-mapa" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3976.786244763774!2d-74.0839099240348!3d4.632129942330298!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e3f9a3b0b1b1b1b%3A0x1b1b1b1b1b1b1b1b!2sMedipiel!5e0!3m2!1ses!2sco!4v1620000000000!5m2!1ses!2sco" allowfullscreen="" loading="lazy"></iframe>
        </div>
    </div>
    <div class="copyright">
        <p>¬© 2023 Medipiel. Todos los derechos reservados.</p>
    </div>
</footer>
<!-- Modal Detalle Producto -->
<div id="modal-producto" class="modal-producto">
    <div class="modal-producto-content">
        <div class="producto-imagen">
            <img id="producto-imagen-detalle" src="" alt="Imagen del producto" class="imagen-elegante">
        </div>
        <div class="producto-info">
            <button class="close-modal">&times;</button>
            <h1 class="producto-titulo" id="producto-titulo-detalle"></h1>
            <span class="producto-marca" id="producto-marca-detalle"></span>
            
            <div class="producto-precio-container">
                <span class="precio" id="precio-actual"></span>
                <span class="precio-ml" id="precio-ml-detalle"></span>
                <p class="descripcion" id="producto-descripcion-detalle"></p>
            </div>
            
            <div class="tamanos-container" id="tamanos-container" style="display: none;">
                <label>Tama√±o</label>
                <div class="tamanos-options" id="tamanos-options"></div>
            </div>
            
            <div class="cantidad-container">
                <label>Cantidad:</label>
                <div class="cantidad-selector">
                    <button class="cantidad-btn decrementar">-</button>
                    <input type="number" value="1" min="1" id="cantidad-producto">
                    <button class="cantidad-btn incrementar">+</button>
                </div>
            </div>
            
            <button class="btn-agregar-elegante" id="btn-agregar-detalle">
                <i class="fas fa-shopping-cart"></i> A√±adir al carrito
            </button>
        </div>
    </div>
</div>

<!-- Chatbot Flotante -->
<div class="chatbot-float" id="chatbot-float">
    üí¨
</div>

<!-- Modal del Chatbot -->
<div class="modal-chatbot" id="modal-chatbot">
    <div class="chatbot-header">
        <h3>Asistente de Productos</h3>
        <button class="close-chatbot">&times;</button>
    </div>
    <div class="chatbot-body" id="chatbot-body">
        <!-- Los mensajes del chat aparecer√°n aqu√≠ -->
    </div>
    </div>


<!-- Modal Carrito -->
    <div id="modal-carrito" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h3>Tu Carrito de Compras</h3>
        <div id="items-carrito"></div>
        <div id="total-carrito" style="font-weight: bold; margin-top: 20px;"></div>
        <button id="finalizar-compra" class="btn-producto">Finalizar Compra</button>
    </div>
</div>

<!-- Modal Pago -->
<div id="modal-pago" class="modal modal-pago">
    <div class="modal-content">
        <span class="close">&times;</span>
        
            <!-- Barra de progreso mejorada -->
            <div class="checkout-progress">
                <div class="progress-step active" id="step-info">
                    <span></span>
                    <p>Informaci√≥n</p>
                </div>
                <div class="progress-step" id="step-payment-method">
                    <span></span>
                    <p>M√©todo de Pago</p>
                </div>
                <div class="progress-step" id="step-confirm">
                    <span></span>
                    <p>Confirmar Pago</p>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
            </div>
        
        <div class="checkout-container">
            <!-- Columna izquierda - Resumen de productos -->
            <div class="checkout-products">
                <h3>Producto(s)</h3>
                <div id="resumen-compra-detallado"></div>
                
                <div class="checkout-summary">
                    <div class="summary-row">
                        <span>Subtotal</span>
                        <span id="subtotal-compra"></span>
                    </div>
                    <div class="summary-row">
                        <span>Env√≠o</span>
                        <span>$14.904</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total</span>
                        <span id="total-compra"></span>
                    </div>
                </div>
            </div>
            
            <!-- Columna derecha - Formulario con secciones -->
            <div class="checkout-form">
                <form class="form-pago" id="payment-form">
                    <!-- Secci√≥n 1: Informaci√≥n personal -->
                    <div class="form-section active" id="section-info">
                        <h4>Informaci√≥n Personal</h4>
                        
                        <div class="full-width">
                            <label>Nombre completo*</label>
                            <input type="text" id="nombre-completo" required>
                        </div>
                        
                        <div>
                            <label>Tel√©fono*</label>
                            <input type="tel" id="telefono" required>
                        </div>
                        
                        <div>
                            <label>Correo electr√≥nico*</label>
                            <input type="email" id="email" required>
                        </div>
                        
                        <div>
                            <label>Confirmar correo*</label>
                            <input type="email" id="confirm-email" required>
                        </div>
                        
                        <div class="full-width">
                            <label>Direcci√≥n completa*</label>
                            <input type="text" id="direccion" placeholder="Calle, n√∫mero, barrio" required>
                        </div>
                        
                        <div>
                            <label>Ciudad*</label>
                            <input type="text" id="ciudad" required>
                        </div>
                        
                        <div>
                            <label>Departamento*</label>
                            <select id="departamento" required>
                                <option value="">Seleccionar...</option>
                                <option>Antioquia</option>
                                <option>Boyaca</option>
                                <option>Cesar</option>
                                <option>Cundinamarca</option>
                                <option>Santander</option>
                                <option>Valle del Cauca</option>
                            </select>
                        </div>
                        
                        <div class="full-width">
                            <label>Notas adicionales (opcional)</label>
                            <textarea id="notas" rows="3" placeholder="Instrucciones especiales para la entrega"></textarea>
                        </div>
                        
                        <div class="full-width" style="text-align: right;">
                            <button type="button" class="btn-next" id="btn-next-info">Siguiente</button>
                        </div>
                    </div>
                    
                    <!-- Secci√≥n 2: M√©todo de pago -->
                    <div class="form-section" id="section-payment-method">
                        <h4>M√©todo de Pago</h4>
                        
                        <div class="full-width">
                            <div class="metodo-pago">
                                <input type="radio" name="metodo-pago" id="tarjeta" value="tarjeta" checked>
                                <img src="img/tarjeta.png" alt="Tarjeta">
                                <label for="tarjeta">Tarjeta Cr√©dito/D√©bito</label>
                            </div>
                            
                            <div class="metodo-pago">
                                <input type="radio" name="metodo-pago" id="nequi" value="nequi">
                                <img src="img/nequi.png" alt="Nequi">
                                <label for="nequi">Nequi</label>
                            </div>
                            
                            <div class="metodo-pago">
                                <input type="radio" name="metodo-pago" id="efecty" value="efecty">
                                <img src="img/efecty.png" alt="Efecty">
                                <label for="efecty">Efecty</label>
                            </div>
                        </div>
                        
                        <!-- Secci√≥n de tarjeta -->
                        <div id="datos-tarjeta" class="full-width">
                            <h5>Datos de la Tarjeta</h5>
                            
                            <div class="full-width">
                                <label>Nombre en la tarjeta*</label>
                                <input type="text" id="nombre-tarjeta" required>
                            </div>
                            
                            <div class="full-width">
                                <label>N√∫mero de tarjeta*</label>
                                <input type="text" id="numero-tarjeta" placeholder="1234 5678 9012 3456" required>
                            </div>
                            
                            <div>
                                <label>Fecha de expiraci√≥n*</label>
                                <input type="text" id="fecha-expiracion" placeholder="MM/AA" required>
                            </div>
                            
                            <div>
                                <label>CVV*</label>
                                <input type="text" id="cvv" placeholder="123" required>
                            </div>
                        </div>
                        
                        <!-- Campos para Nequi -->
                        <div id="datos-nequi" class="full-width" style="display: none;">
                            <h5>Datos para pago con Nequi</h5>
                            <div>
                                <label>N√∫mero de tel√©fono Nequi*</label>
                                <input type="tel" id="telefono-nequi" placeholder="3101234567">
                            </div>
                            <div>
                                <label>Nombre del titular*</label>
                                <input type="text" id="nombre-nequi">
                            </div>
                        </div>

                        <!-- Campos para Efecty -->
                        <div id="datos-efecty" class="full-width" style="display: none;">
                            <h5>Datos para pago con Efecty</h5>
                            <div class="full-width">
                                <label>¬øDeseas recibir factura electr√≥nica?</label>
                                <div style="margin-top: 10px;">
                                    <input type="radio" name="factura" id="si-factura" value="si">
                                    <label for="si-factura" style="display: inline; margin-right: 15px;">S√≠</label>
                                    <input type="radio" name="factura" id="no-factura" value="no" checked>
                                    <label for="no-factura" style="display: inline;">No</label>
                                </div>
                            </div>
                            <div id="campo-correo-factura" style="display: none;">
                                <label>Correo electr√≥nico para factura*</label>
                                <input type="email" id="correo-factura">
                            </div>
                        </div>
                        
                        <div class="full-width" style="display: flex; justify-content: space-between; margin-top: 20px;">
                            <button type="button" class="btn-prev" id="btn-prev-payment">Anterior</button>
                            <button type="button" class="btn-next" id="btn-next-payment">Siguiente</button>
                        </div>
                    </div>
                    
                    <!-- Secci√≥n 3: Confirmaci√≥n -->
                    <div class="form-section" id="section-confirm">
                        <h4>Resumen de tu compra</h4>
                        
                        <div id="resumen-info">
                            <!-- Aqu√≠ se mostrar√° la informaci√≥n ingresada -->
                        </div>
                        
                        <div id="resumen-pago">
                            <!-- Aqu√≠ se mostrar√° el m√©todo de pago seleccionado -->
                        </div>
                        
                        <div class="checkout-summary">
                            <div class="summary-row total">
                                <span>Total a pagar</span>
                                <span id="total-confirm"></span>
                            </div>
                        </div>
                        
                        <!-- Nueva opci√≥n de muestra gratis -->
                        <div class="free-sample-option" style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="muestra-gratis"> 
                                <div>
                                    <strong>¬°Muestras gratis!</strong>
                                    <p style="margin: 5px 0 0; font-size: 0.9em; color: #666;">Selecciona esta opci√≥n para recibir muestras de nuestros nuevos lanzamientos con tu pedido.</p>
                                </div>
                            </label>
                        </div>
                        <!-- Opci√≥n de regalo -->
                        <div class="gift-option">
                            <label>
                                <input type="checkbox" id="es-regalo"> 
                                Envoltorio de regalo 
                            </label>
                            <div class="gift-message" id="gift-message">
                                <label for="mensaje-regalo">Mensaje para el regalo (opcional)</label>
                                <textarea id="mensaje-regalo" rows="3" placeholder="Escribe un mensaje especial para incluir con el regalo"></textarea>
                            </div>
                        </div>
                        
                        <!-- T√©rminos y condiciones -->
                        <div class="terms-container">
                            <label>
                                <input type="checkbox" id="accept-terms" required> 
                                Acepto los T√©rminos y Condiciones y autorizo el procesamiento de mis datos personales.
                            </label>
                        </div>
                        
                        <div class="full-width" style="display: flex; justify-content: space-between; margin-top: 20px;">
                            <button type="button" class="btn-prev" id="btn-prev-confirm">Anterior</button>
                            <button type="submit" class="btn-producto" id="btn-confirm-purchase">Confirmar Pago</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript -->
<script>
    // Configuraci√≥n inicial
    document.addEventListener('DOMContentLoaded', () => {
        initNavbar();
        initCarrusel();
        initProductFilters();
        initCartSystem();
        initTooltips();
        initMapHover();
        initChatbot();
        initMayoristasSection();
        initProductDetailModal();
    });
    
    // 1. Efecto de Navbar al hacer scroll
    function initNavbar() {
        const navbar = document.getElementById('navbar');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                navbar.style.background = 'var(--blanco)';
                navbar.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.1)';
            } else {
                navbar.style.background = 'transparent';
                navbar.style.boxShadow = 'none';
            }
        });
    }
    
    // 2. Carrusel de im√°genes
    function initCarrusel() {
        let currentSlide = 0;
        const slides = document.querySelectorAll('.carrusel-item');
        const totalSlides = slides.length;
        const dotsContainer = document.getElementById('carrusel-dots');
        let carruselInterval;
    
        // Crear dots de navegaci√≥n
        slides.forEach((_, index) => {
            const dot = document.createElement('div');
            dot.classList.add('dot');
            if (index === 0) dot.classList.add('active');
            dot.addEventListener('click', () => {
                currentSlide = index;
                updateCarrusel();
            });
            dotsContainer.appendChild(dot);
        });
    
        function updateCarrusel() {
            const carruselInner = document.getElementById('carrusel-inner');
            carruselInner.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            // Actualizar dots activos
            document.querySelectorAll('.dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }
    
        function moveSlide(direction) {
            currentSlide = (currentSlide + direction + totalSlides) % totalSlides;
            updateCarrusel();
        }
    
        // Auto-avance del carrusel
        function startAutoSlide() {
            carruselInterval = setInterval(() => moveSlide(1), 5000);
        }
    
        // Controladores de eventos
        document.querySelector('.carrusel-control.prev').addEventListener('click', () => moveSlide(-1));
        document.querySelector('.carrusel-control.next').addEventListener('click', () => moveSlide(1));
        
        const carrusel = document.querySelector('.carrusel');
        carrusel.addEventListener('mouseenter', () => clearInterval(carruselInterval));
        carrusel.addEventListener('mouseleave', startAutoSlide);
    
        startAutoSlide();
    }
    
    // 3. Filtrado de productos
    function initProductFilters() {
    const categorias = document.querySelectorAll('.categoria');
    const productos = document.querySelectorAll('.producto');
    const toggleFiltrosBtn = document.getElementById('toggle-filtros');
    const filtrosContenido = document.getElementById('filtros-contenido');

    // Filtrado por categor√≠a (funcionalidad b√°sica)
    categorias.forEach(categoria => {
        categoria.addEventListener('click', () => {
            categorias.forEach(c => c.classList.remove('active'));
            categoria.classList.add('active');
            
            const categoriaSeleccionada = categoria.dataset.categoria;
            
            productos.forEach(producto => {
                const categoriasProducto = producto.dataset.categorias.split(' ');
                producto.style.display = (categoriaSeleccionada === 'all' || categoriasProducto.includes(categoriaSeleccionada)) 
                    ? 'block' 
                    : 'none';
            });
        });
    });

    // Toggle filtros avanzados
    toggleFiltrosBtn.addEventListener('click', () => {
        filtrosContenido.classList.toggle('activo');
        toggleFiltrosBtn.classList.toggle('activo');
    });

    // Funci√≥n de filtrado simplificada y garantizada
    function aplicarFiltrosProductos() {
        // Obtener marcas seleccionadas
        const marcasCheckboxes = document.querySelectorAll('.filtros-contenido input[data-filtro="marca"]:checked');
        const marcasSeleccionadas = Array.from(marcasCheckboxes).map(cb => cb.value.toLowerCase().trim());

        // Aplicar solo filtro de marcas (versi√≥n simplificada)
        productos.forEach(producto => {
            const marcaProducto = producto.dataset.marca.toLowerCase().trim();
            
            // Si no hay marcas seleccionadas, mostrar todos
            if (marcasSeleccionadas.length === 0) {
                producto.style.display = 'block';
                return;
            }
            
            // Mostrar solo si coincide con alguna marca seleccionada
            producto.style.display = marcasSeleccionadas.includes(marcaProducto) ? 'block' : 'none';
        });
    }

    // Asignar eventos a los checkboxes de marca
    document.querySelectorAll('.filtros-contenido input[data-filtro="marca"]').forEach(checkbox => {
        checkbox.addEventListener('change', aplicarFiltrosProductos);
    });
}
    
    // 4. Sistema de Carrito
    function initCartSystem() {
        // Elementos del DOM
        const cartCountElement = document.querySelector('.carrito-count');
        const modalCarrito = document.getElementById('modal-carrito');
        const modalPago = document.getElementById('modal-pago');
        const itemsCarrito = document.getElementById('items-carrito');
        const totalCarrito = document.getElementById('total-carrito');
        const finalizarCompraBtn = document.getElementById('finalizar-compra');
        const closeButtons = document.querySelectorAll('.modal .close');
        
        // Elementos de la barra de progreso
        const progressSteps = document.querySelectorAll('.progress-step');
        const progressFill = document.getElementById('progress-fill');
        const stepInfo = document.getElementById('step-info');
        const stepPaymentMethod = document.getElementById('step-payment-method');
        const stepConfirm = document.getElementById('step-confirm');
        
        // Secciones del formulario
        const formSections = document.querySelectorAll('.form-section');
        const sectionInfo = document.getElementById('section-info');
        const sectionPaymentMethod = document.getElementById('section-payment-method');
        const sectionConfirm = document.getElementById('section-confirm');
        
        // Botones de navegaci√≥n
        const btnNextInfo = document.getElementById('btn-next-info');
        const btnNextPayment = document.getElementById('btn-next-payment');
        const btnPrevPayment = document.getElementById('btn-prev-payment');
        const btnPrevConfirm = document.getElementById('btn-prev-confirm');
        const btnConfirmPurchase = document.getElementById('btn-confirm-purchase');
        
        // Elementos del formulario de pago
        const formPago = document.getElementById('payment-form');
        const metodoPagoRadios = document.querySelectorAll('input[name="metodo-pago"]');
        const datosTarjeta = document.getElementById('datos-tarjeta');
        const datosNequi = document.getElementById('datos-nequi');
        const datosEfecty = document.getElementById('datos-efecty');
        const campoCorreoFactura = document.getElementById('campo-correo-factura');
        const facturaRadios = document.querySelectorAll('input[name="factura"]');
    
        // Opci√≥n de regalo
        const esRegaloCheckbox = document.getElementById('es-regalo');
        const giftMessage = document.getElementById('gift-message');
    
        // Cargar carrito desde localStorage
        let cartItems = JSON.parse(localStorage.getItem('medipielCart')) || [];
        let cartCount = cartItems.reduce((total, item) => total + item.cantidad, 0);
        
        // Mostrar cantidad inicial
        updateCartCount(cartCount);
    
        // ==============================================
        // EVENTOS PRINCIPALES
        // ==============================================
    
        // Evento para abrir el modal del carrito
        document.querySelector('.carrito').addEventListener('click', function(e) {
            e.preventDefault();
            openModal(modalCarrito);
            updateCartModal();
        });
    
        // Evento para bot√≥n de finalizar compra
        if (finalizarCompraBtn) {
            finalizarCompraBtn.addEventListener('click', function() {
                closeModal(modalCarrito);
                openModal(modalPago);
                updatePaymentModal();
                actualizarSeccionesPago();
                updateProgressBar(0); // Iniciar en el primer paso
            });
        }
    
        // Eventos para botones de cerrar modales
        closeButtons.forEach(button => {
            button.addEventListener('click', function() {
                const modal = this.closest('.modal');
                closeModal(modal);
            });
        });
    
        // Cerrar modales al hacer clic fuera del contenido
        document.querySelectorAll('.cantidad-btn').forEach(button => {
            button.addEventListener('click', function(e) {
                e.stopPropagation(); // Evita que el clic se propague al producto
                const input = this.parentElement.querySelector('.cantidad-input');
                let value = parseInt(input.value);
                
                if (this.classList.contains('incrementar')) {
                    value++;
                } else if (this.classList.contains('decrementar') && value > 1) {
                    value--;
                }
                
                input.value = value;
            });
        });
    
        // Evento para opci√≥n de regalo
        esRegaloCheckbox.addEventListener('change', function() {
            giftMessage.style.display = this.checked ? 'block' : 'none';
        });
    
        // Navegaci√≥n entre secciones
        btnNextInfo.addEventListener('click', function() {
            if (validateInfoSection()) {
                showSection(sectionPaymentMethod);
                updateProgressBar(1);
            }
        });
    
        btnNextPayment.addEventListener('click', function() {
            if (validatePaymentSection()) {
                updateResumenConfirmacion();
                showSection(sectionConfirm);
                updateProgressBar(2);
            }
        });
    
        btnPrevPayment.addEventListener('click', function() {
            showSection(sectionInfo);
            updateProgressBar(0);
        });
    
        btnPrevConfirm.addEventListener('click', function() {
            showSection(sectionPaymentMethod);
            updateProgressBar(1);
        });
    
        // Eventos para m√©todos de pago
        metodoPagoRadios.forEach(radio => {
            radio.addEventListener('change', actualizarSeccionesPago);
        });
    
        // Eventos para facturaci√≥n
        facturaRadios.forEach(radio => {
            radio.addEventListener('change', actualizarFactura);
        });
    
        // Evento para enviar formulario de pago
        if (formPago) {
            formPago.addEventListener('submit', procesarFormularioPago);
        }
    
        // Eventos de botones "A√±adir al carrito"
        document.querySelectorAll('.btn-producto').forEach(button => {
            button.addEventListener('click', function() {
                const producto = this.closest('.producto');
                const nombre = producto.querySelector('h3').textContent;
                const precio = producto.querySelector('.precio').textContent;
                const imgSrc = producto.querySelector('img').src;
                const cantidad = parseInt(producto.querySelector('.cantidad-input').value) || 1;
                
                addToCart(nombre, precio, imgSrc, cantidad);
                
                // Animaci√≥n de confirmaci√≥n
                this.innerHTML = '<i class="fas fa-check"></i> Agregado';
                setTimeout(() => {
                    this.innerHTML = 'A√±adir al carrito';
                }, 1500);
            });
        });
    
        // ==============================================
        // FUNCIONES PRINCIPALES DEL CARRITO
        // ==============================================
    
        function updateCartCount(count) {
            if (cartCountElement) {
                cartCountElement.textContent = count;
                // Animaci√≥n
                cartCountElement.style.transform = 'scale(1.5)';
                setTimeout(() => cartCountElement.style.transform = 'scale(1)', 300);
            }
        }
    
        window.addToCart = function(nombre, precio, imgSrc, cantidad = 1) {
        const existingItem = cartItems.find(item => 
            item.nombre === nombre && 
            item.precio === precio && 
            item.imgSrc === imgSrc
        );

        if (existingItem) {
            existingItem.cantidad += cantidad;
        } else {
            cartItems.push({ nombre, precio, imgSrc, cantidad });
        }

        cartCount = cartItems.reduce((total, item) => total + item.cantidad, 0);
        updateCartCount(cartCount);
        saveCart();
        }; 

        function removeFromCart(productName) {
            cartItems = cartItems.filter(item => item.nombre !== productName);
            cartCount = cartItems.reduce((total, item) => total + item.cantidad, 0);
            updateCartCount(cartCount);
            saveCart();
            updateCartModal();
            updatePaymentModal();
        }
    
        function updateCartModal() {
            const itemsCarrito = document.getElementById('items-carrito');
            const totalCarrito = document.getElementById('total-carrito');
            
            if (!itemsCarrito || !totalCarrito) return;
            
            itemsCarrito.innerHTML = '';
            let total = 0;
    
            cartItems.forEach(item => {
                const precioNumerico = parseInt(item.precio.replace(/\D/g, '')) || 0;
                const subtotal = precioNumerico * item.cantidad;
                total += subtotal;
    
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <img src="${item.imgSrc}" alt="${item.nombre}" width="60">
                    <div class="cart-item-info">
                        <h4>${item.nombre}</h4>
                        <p>Cantidad: ${item.cantidad}</p>
                        <p>${item.precio} c/u = $${subtotal.toLocaleString()}</p>
                    </div>
                    <button class="remove-item" data-product="${item.nombre}">‚úñ</button>
                `;
                
                itemsCarrito.appendChild(itemElement);
            });
    
            totalCarrito.textContent = `Total: $${total.toLocaleString()}`;
    
            // Eventos para botones de eliminar
            document.querySelectorAll('.remove-item').forEach(button => {
                button.addEventListener('click', function() {
                    removeFromCart(this.dataset.product);
                });
            });
        }
    
        function updatePaymentModal() {
            const resumenCompra = document.getElementById('resumen-compra-detallado');
            const totalCompra = document.getElementById('total-compra');
            const subtotalCompra = document.getElementById('subtotal-compra');
            
            if (!resumenCompra || !totalCompra || !subtotalCompra) return;
            
            resumenCompra.innerHTML = '';
            let subtotal = 0;
    
            cartItems.forEach(item => {
                const precioNumerico = parseInt(item.precio.replace(/\D/g, '')) || 0;
                const itemSubtotal = precioNumerico * item.cantidad;
                subtotal += itemSubtotal;
    
                const itemElement = document.createElement('div');
                itemElement.className = 'resumen-item';
                itemElement.innerHTML = `
                    <div class="resumen-item-imagen">
                        <img src="${item.imgSrc}" alt="${item.nombre}" width="60">
                    </div>
                    <div class="resumen-item-info">
                        <h4>${item.nombre}</h4>
                        <p>${item.precio} c/u</p>
                        <div class="resumen-item-quantity">
                            <button class="cantidad-btn minus" data-product="${item.nombre}">-</button>
                            <input type="text" class="cantidad-input" value="${item.cantidad}" readonly>
                            <button class="cantidad-btn plus" data-product="${item.nombre}">+</button>
                        </div>
                    </div>
                    <div class="resumen-item-price">
                        $${itemSubtotal.toLocaleString()}
                    </div>
                `;
                
                // Agregar eventos a los botones de cantidad
                const minusBtn = itemElement.querySelector('.minus');
                const plusBtn = itemElement.querySelector('.plus');
                
                minusBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    updateCartItemQuantity(item.nombre, -1);
                });
                
                plusBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    updateCartItemQuantity(item.nombre, 1);
                });
                
                resumenCompra.appendChild(itemElement);
            });
    
            // Calcular total con env√≠o
            const envio = 14904;
            const total = subtotal + envio;
            
            subtotalCompra.textContent = `$${subtotal.toLocaleString()}`;
            totalCompra.textContent = `$${total.toLocaleString()}`;
            document.getElementById('total-confirm').textContent = `$${total.toLocaleString()}`;
        }
    
        function updateCartItemQuantity(productName, change) {
            const item = cartItems.find(item => item.nombre === productName);
            if (item) {
                item.cantidad += change;
                
                if (item.cantidad < 1) {
                    removeFromCart(productName);
                } else {
                    saveCart();
                    updatePaymentModal();
                    updateCartModal();
                }
            }
        }
    
        // ==============================================
        // FUNCIONES DE PAGO
        // ==============================================
    
        function actualizarSeccionesPago() {
            const metodoSeleccionado = document.querySelector('input[name="metodo-pago"]:checked').value;
            
            // Ocultar todas las secciones primero
            datosTarjeta.style.display = 'none';
            datosNequi.style.display = 'none';
            datosEfecty.style.display = 'none';
            
            // Mostrar solo la secci√≥n correspondiente
            switch(metodoSeleccionado) {
                case 'tarjeta':
                    datosTarjeta.style.display = 'block';
                    break;
                case 'nequi':
                    datosNequi.style.display = 'block';
                    break;
                case 'efecty':
                    datosEfecty.style.display = 'block';
                    break;
            }
            
            actualizarCamposRequeridos();
        }
    
        function actualizarFactura() {
            const quiereFactura = document.querySelector('input[name="factura"]:checked').value === 'si';
            campoCorreoFactura.style.display = quiereFactura ? 'block' : 'none';
            actualizarCamposRequeridos();
        }
    
        function actualizarCamposRequeridos() {
            const metodoSeleccionado = document.querySelector('input[name="metodo-pago"]:checked').value;
            const quiereFactura = document.querySelector('input[name="factura"]:checked').value === 'si';
            
            // Resetear todos los requeridos primero
            document.querySelectorAll('#datos-tarjeta input, #datos-nequi input, #campo-correo-factura input').forEach(input => {
                input.required = false;
            });
            
            // Configurar requeridos seg√∫n m√©todo de pago
            if (metodoSeleccionado === 'tarjeta') {
                document.querySelectorAll('#datos-tarjeta input').forEach(input => {
                    input.required = true;
                });
            } else if (metodoSeleccionado === 'nequi') {
                document.querySelectorAll('#datos-nequi input').forEach(input => {
                    input.required = true;
                });
            } else if (metodoSeleccionado === 'efecty' && quiereFactura) {
                document.querySelector('#campo-correo-factura input').required = true;
            }
        }
    
        function validateInfoSection() {
            const nombre = document.getElementById('nombre-completo').value;
            const telefono = document.getElementById('telefono').value;
            const email = document.getElementById('email').value;
            const confirmEmail = document.getElementById('confirm-email').value;
            const direccion = document.getElementById('direccion').value;
            const ciudad = document.getElementById('ciudad').value;
            const departamento = document.getElementById('departamento').value;
            
            if (!nombre || !telefono || !email || !confirmEmail || !direccion || !ciudad || !departamento) {
                alert('Por favor completa todos los campos obligatorios');
                return false;
            }
            
            if (email !== confirmEmail) {
                alert('Los correos electr√≥nicos no coinciden');
                return false;
            }
            
            return true;
        }
    
        function validatePaymentSection() {
            const metodoPago = document.querySelector('input[name="metodo-pago"]:checked').value;
            
            if (metodoPago === 'tarjeta') {
                const nombreTarjeta = document.getElementById('nombre-tarjeta').value;
                const numeroTarjeta = document.getElementById('numero-tarjeta').value;
                const fechaExpiracion = document.getElementById('fecha-expiracion').value;
                const cvv = document.getElementById('cvv').value;
                
                if (!nombreTarjeta || !numeroTarjeta || !fechaExpiracion || !cvv) {
                    alert('Por favor completa todos los datos de la tarjeta');
                    return false;
                }
                
                if (numeroTarjeta.replace(/\D/g, '').length < 16) {
                    alert('El n√∫mero de tarjeta debe tener 16 d√≠gitos');
                    return false;
                }
            } else if (metodoPago === 'nequi') {
                const telefono = document.getElementById('telefono-nequi').value;
                const nombre = document.getElementById('nombre-nequi').value;
                
                if (!telefono || !nombre) {
                    alert('Por favor completa todos los datos de Nequi');
                    return false;
                }
                
                if (telefono.replace(/\D/g, '').length < 10) {
                    alert('El n√∫mero de tel√©fono debe tener al menos 10 d√≠gitos');
                    return false;
                }
            } else if (metodoPago === 'efecty') {
                const factura = document.querySelector('input[name="factura"]:checked').value;
                
                if (factura === 'si' && !document.getElementById('correo-factura').value) {
                    alert('Por favor ingresa el correo para la factura');
                    return false;
                }
            }
            
            return true;
        }
    
        function updateResumenConfirmacion() {
            const resumenInfo = document.getElementById('resumen-info');
            const resumenPago = document.getElementById('resumen-pago');
            
            // Informaci√≥n personal
            const nombre = document.getElementById('nombre-completo').value;
            const direccion = document.getElementById('direccion').value;
            const ciudad = document.getElementById('ciudad').value;
            const departamento = document.getElementById('departamento').value;
            const telefono = document.getElementById('telefono').value;
            const email = document.getElementById('email').value;
            
            resumenInfo.innerHTML = `
                <div style="margin-bottom: 15px;">
                    <h5>Informaci√≥n de Entrega</h5>
                    <p><strong>Nombre:</strong> ${nombre}</p>
                    <p><strong>Direcci√≥n:</strong> ${direccion}, ${ciudad}, ${departamento}</p>
                    <p><strong>Tel√©fono:</strong> ${telefono}</p>
                    <p><strong>Email:</strong> ${email}</p>
                </div>
            `;
            
            // M√©todo de pago
            const metodoPago = document.querySelector('input[name="metodo-pago"]:checked').value;
            let detallesPago = '';
            
            if (metodoPago === 'tarjeta') {
                const numeroTarjeta = document.getElementById('numero-tarjeta').value;
                const ultimos4 = numeroTarjeta.slice(-4);
                detallesPago = `
                    <p><strong>M√©todo:</strong> Tarjeta de cr√©dito/d√©bito</p>
                    <p><strong>N√∫mero:</strong> **** **** **** ${ultimos4}</p>
                `;
            } else if (metodoPago === 'nequi') {
                const telefono = document.getElementById('telefono-nequi').value;
                detallesPago = `
                    <p><strong>M√©todo:</strong> Nequi</p>
                    <p><strong>Tel√©fono:</strong> ${telefono}</p>
                `;
            } else if (metodoPago === 'efecty') {
                detallesPago = `<p><strong>M√©todo:</strong> Efecty</p>`;
                const factura = document.querySelector('input[name="factura"]:checked').value;
                if (factura === 'si') {
                    const correo = document.getElementById('correo-factura').value;
                    detallesPago += `<p><strong>Factura a:</strong> ${correo}</p>`;
                }
            }
            
            resumenPago.innerHTML = `
                <div style="margin-bottom: 15px;">
                    <h5>Informaci√≥n de Pago</h5>
                    ${detallesPago}
                </div>
            `;
        }
    
        function procesarFormularioPago(e) {
            e.preventDefault();
            
            if (!document.getElementById('accept-terms').checked) {
                alert('Debes aceptar los t√©rminos y condiciones para continuar');
                return;
            }
            
            const metodoPago = document.querySelector('input[name="metodo-pago"]:checked').value;
            const esRegalo = document.getElementById('es-regalo').checked;
            const mensajeRegalo = esRegalo ? document.getElementById('mensaje-regalo').value : '';
            
            // Procesar el pago
            procesarPago(metodoPago, esRegalo, mensajeRegalo);
        }
    
        function procesarPago(metodoPago, esRegalo, mensajeRegalo) {
            let mensaje = '¬°Pago procesado con √©xito!\nM√©todo: ';
            let detalles = '';
            
            switch(metodoPago) {
                case 'tarjeta':
                    const nombreTarjeta = document.getElementById('nombre-tarjeta').value;
                    mensaje += 'Tarjeta de cr√©dito/d√©bito';
                    detalles = `Titular: ${nombreTarjeta}`;
                    break;
                case 'nequi':
                    const telefono = document.getElementById('telefono-nequi').value;
                    mensaje += 'Nequi';
                    detalles = `Tel√©fono: ${telefono}`;
                    break;
                case 'efecty':
                    mensaje += 'Efecty';
                    const factura = document.querySelector('input[name="factura"]:checked').value;
                    if (factura === 'si') {
                        const correo = document.getElementById('correo-factura').value;
                        detalles = `Factura enviada a: ${correo}`;
                    }
                    break;
            }
            
            if (esRegalo) {
                detalles += `\n\nEsta compra es un regalo`;
                if (mensajeRegalo) {
                    detalles += `\nMensaje: "${mensajeRegalo}"`;
                }
            }
            
            alert(`${mensaje}\n${detalles}\n\nTotal: ${document.getElementById('total-confirm').textContent}`);
            
            // Limpiar carrito y cerrar modales
            localStorage.removeItem('medipielCart');
            cartItems = [];
            cartCount = 0;
            updateCartCount(cartCount);
            closeModal(modalPago);
            
            // Redirigir a p√°gina de agradecimiento (opcional)
            // setTimeout(() => { window.location.href = 'gracias.html'; }, 1000);
        }
    
        // ==============================================
        // FUNCIONES DE NAVEGACI√ìN Y PROGRESO
        // ==============================================
    
        function showSection(sectionToShow) {
            formSections.forEach(section => {
                section.classList.remove('active');
            });
            sectionToShow.classList.add('active');
        }
    
        function updateProgressBar(step) {
            // Actualizar pasos
            progressSteps.forEach((stepElement, index) => {
                // Resetear clases primero
                stepElement.classList.remove('active', 'completed');
                
                // Aplicar clases seg√∫n el estado
                if (index < step) {
                    stepElement.classList.add('completed');
                } else if (index === step) {
                    // Peque√±o retraso para la animaci√≥n del paso activo
                    setTimeout(() => {
                        stepElement.classList.add('active');
                    }, 150);
                }
            });
            
            // Actualizar barra de progreso con animaci√≥n suave
            const progressPercentage = (step / (progressSteps.length - 1)) * 100;
            
            // Usar requestAnimationFrame para animaci√≥n fluida
            let start = null;
            const duration = 500;
            const initialWidth = parseFloat(progressFill.style.width) || 0;
            const targetWidth = progressPercentage;
            
            function animate(timestamp) {
                if (!start) start = timestamp;
                const progress = Math.min((timestamp - start) / duration, 1);
                const currentWidth = initialWidth + (targetWidth - initialWidth) * progress;
                progressFill.style.width = `${currentWidth}%`;
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                }
            }
            
            requestAnimationFrame(animate);
        }
    
        // ==============================================
        // FUNCIONES AUXILIARES
        // ==============================================
    
        function saveCart() {
            localStorage.setItem('medipielCart', JSON.stringify(cartItems));
        }
    
        function openModal(modal) {
            if (modal) {
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }
    
        function closeModal(modal) {
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }
    
        // Inicializar secciones de pago al cargar
        actualizarSeccionesPago();
        actualizarFactura();
    }
    
    // 5. Tooltips
    function initTooltips() {
        document.querySelectorAll('.tooltip').forEach(tooltip => {
            const tooltiptext = tooltip.querySelector('.tooltiptext');
            
            tooltip.addEventListener('mouseenter', () => {
                tooltiptext.style.visibility = 'visible';
                tooltiptext.style.opacity = '1';
            });
            
            tooltip.addEventListener('mouseleave', () => {
                tooltiptext.style.visibility = 'hidden';
                tooltiptext.style.opacity = '0';
            });
        });
    }
    
    // 6. Efecto hover para el mapa
    function initMapHover() {
        const mapa = document.querySelector('.footer-mapa');
        
        document.querySelector('.footer-mapa-container').addEventListener('mouseenter', () => {
            mapa.style.transform = 'scale(1.03)';
            mapa.style.transition = 'transform 0.3s ease';
        });
    
        document.querySelector('.footer-mapa-container').addEventListener('mouseleave', () => {
            mapa.style.transform = 'scale(1)';
        });
    }
    
    // 7. Chat bot
    function initChatbot() {
        const chatbotFloat = document.getElementById('chatbot-float');
        const modalChatbot = document.getElementById('modal-chatbot');
        const chatbotBody = document.getElementById('chatbot-body');
        const closeChatbot = document.querySelector('.close-chatbot');
    
        // Base de datos de productos
        const productos = {
            hidratacion: [
                {
                    nombre: "Hidratante Facial Anti-brillo Effaclar Matificante",
                    descripcion: "Controla el brillo y mantiene la hidrataci√≥n para pieles grasas",
                    precio: "$162.000",
                    imagen: "img/Hidra1.png",
                    tipoPiel: ["grasa", "mixta"]
                },
            ],
            proteccion: [
                {
                    nombre: "Fotoprotector Fusion Water Magic Oil Control",
                    descripcion: "Fotoprotector facial diario SPF 50, ultraligero, no graso, con √°cido hialur√≥nico, vitamina E y alga antioxidante. Hidrata y protege intensamente.",
                    precio: "$138.000",
                    imagen: "img/procter1.png",
                    tipoPiel: ["sensible", "mixta"]
                },
                
            ],
            reparacion: [
                {
                    nombre: "HA Intensifier Multi-Glycan - Skinceuticals 30 ml",
                    descripcion: "Rellena la piel, mejora la luminosidad y redefine el contorno facial.",
                    precio: "$531.000",
                    imagen: "img/serum1.png",
                    tipoPiel: ["seca", "sensible"]
                },
                
            ],
            limpieza: [
                {
                    nombre: "Sensibio H2O Agua Micelar - Bioderma 500 ml",
                    descripcion: "Agua micelar limpiadora Bioderma que cuida tu piel sensible.",
                    precio: "$167.000",
                    imagen: "img/aguamic1.png",
                    tipoPiel: ["sensible"]
                },
                
            ],
            limpieza: [
                {
                    nombre: "Gel Limpiador Espumoso - CeraVe 473 ml",
                    descripcion: "Elimina el exceso de grasa, suciedad y maquillaje",
                    precio: "$106.000",
                    imagen: "img/limpi1.png",
                    tipoPiel: ["piel"]
                },
                // ... otros productos (mantener la misma estructura)
            ],
            // ... otras categor√≠as
        };
    
        // Estados del chatbot
        let currentStep = 0;
        const steps = [
            {
                pregunta: "¬øQu√© tipo de producto necesitas hoy?",
                opciones: [
                    { texto: "Hidrataci√≥n", value: "hidratacion" },
                    { texto: "Protecci√≥n solar", value: "proteccion" },
                    { texto: "Reparaci√≥n/Tratamiento", value: "reparacion" },
                    { texto: "Limpieza", value: "limpieza" }
                ]
            },
            {
                pregunta: "¬øQu√© tipo de piel tienes?",
                opciones: [
                    { texto: "Seca", value: "seca" },
                    { texto: "Grasa", value: "grasa" },
                    { texto: "Mixta", value: "mixta" },
                    { texto: "Sensible", value: "sensible" },
                    { texto: "Todo tipo de piel", value: "piel" }
                ]
            }
        ];
    
        let selecciones = {
            tipoProducto: "",
            tipoPiel: ""
        };
    
        // Event listeners
        chatbotFloat.addEventListener('click', toggleChatbot);
        closeChatbot.addEventListener('click', toggleChatbot);
    
        function toggleChatbot() {
            const isOpen = modalChatbot.style.display === 'flex';
            
            if (isOpen) {
                modalChatbot.classList.remove('active');
                setTimeout(() => {
                    modalChatbot.style.display = 'none';
                }, 300);
            } else {
                modalChatbot.style.display = 'flex';
                setTimeout(() => {
                    modalChatbot.classList.add('active');
                }, 10);
                resetChatbot();
                mostrarSaludoInicial();
            }
        }
    
        function resetChatbot() {
            chatbotBody.innerHTML = '';
            currentStep = 0;
            selecciones = {
                tipoProducto: "",
                tipoPiel: ""
            };
        }
    
        function mostrarSaludoInicial() {
            addMessage('¬°Hola! üòä Es un gusto ayudarte hoy.', 'bot-message');
            
            setTimeout(() => {
                mostrarPasoActual();
            }, 500);
        }
    
        function mostrarPasoActual() {
            if (currentStep >= steps.length) {
                mostrarRecomendaciones();
                return;
            }
    
            const paso = steps[currentStep];
            addMessage(paso.pregunta, 'bot-message');
            
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'chatbot-options';
            
            paso.opciones.forEach(opcion => {
                const button = document.createElement('button');
                button.className = 'chatbot-option';
                button.textContent = opcion.texto;
                button.addEventListener('click', () => {
                    if (currentStep === 0) {
                        selecciones.tipoProducto = opcion.value;
                    } else if (currentStep === 1) {
                        selecciones.tipoPiel = opcion.value;
                    }
                    currentStep++;
                    mostrarPasoActual();
                });
                optionsDiv.appendChild(button);
            });
            
            chatbotBody.appendChild(optionsDiv);
            chatbotBody.scrollTop = chatbotBody.scrollHeight;
        }
    
        function mostrarRecomendaciones() {
            const productosFiltrados = (productos[selecciones.tipoProducto] || []).filter(
            producto => producto.tipoPiel && producto.tipoPiel.includes(selecciones.tipoPiel.toLowerCase())
        );

        if (productosFiltrados.length === 0) {
            addMessage('No encontramos productos que coincidan con tus necesidades. Prueba con otra combinaci√≥n.', 'bot-message');
            
            // Debug para ayudarte a identificar el problema
            console.log("Categor√≠a seleccionada:", selecciones.tipoProducto);
            console.log("Tipos de piel disponibles:", selecciones.tipoPiel);
            console.log("Productos en categor√≠a:", productos[selecciones.tipoProducto]);
        } else {
            addMessage('Basado en tus selecciones, te recomendamos estos productos:', 'bot-message');
            
            // Limpiar recomendaciones anteriores
            const recomendacionesAnteriores = chatbotBody.querySelectorAll('.producto-recomendado');
            recomendacionesAnteriores.forEach(el => el.remove());
            
            productosFiltrados.forEach(producto => {
                const productoDiv = document.createElement('div');
                productoDiv.className = 'producto-recomendado';
                productoDiv.innerHTML = `
                    <div class="producto-recomendado-imagen">
                        <img src="${producto.imagen}" alt="${producto.nombre}" width="100">
                    </div>
                    <div class="producto-recomendado-info">
                        <h4>${producto.nombre}</h4>
                        <p>${producto.descripcion}</p>
                        <p class="precio-recomendado">${producto.precio}</p>
                    </div>
                `;
                chatbotBody.appendChild(productoDiv);
            });
        }

        preguntarSiNecesitaAlgoMas();
                }
    
        function preguntarSiNecesitaAlgoMas() {
            addMessage('¬øNecesitas algo m√°s hoy?', 'bot-message');
            
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'chatbot-options';
            
            // Bot√≥n para buscar m√°s productos
            const siButton = document.createElement('button');
            siButton.className = 'chatbot-option';
            siButton.textContent = 'S√≠, buscar otro producto';
            siButton.addEventListener('click', () => {
                resetChatbot();
                mostrarSaludoInicial();
            });
            
            // Bot√≥n para finalizar
            const noButton = document.createElement('button');
            noButton.className = 'chatbot-option';
            noButton.textContent = 'No, gracias';
            noButton.addEventListener('click', mostrarMensajeDespedida);
            
            optionsDiv.appendChild(siButton);
            optionsDiv.appendChild(noButton);
            chatbotBody.appendChild(optionsDiv);
            
            chatbotBody.scrollTop = chatbotBody.scrollHeight;
        }
    
        function mostrarMensajeDespedida() {
            chatbotBody.innerHTML = '';
            addMessage('¬°Gracias por confiar en Medipiel!üíô,Esperamos que nuestros productos te ayuden a conseguir los resultados que deseas.', 'bot-message');
            addMessage('No dudes en volver si necesitas m√°s recomendaciones. ¬°Que tengas un excelente d√≠a! üòä', 'bot-message');
            
            const cerrarButton = document.createElement('button');
            cerrarButton.className = 'chatbot-option';
            cerrarButton.textContent = 'Cerrar chat';
            cerrarButton.addEventListener('click', () => {
                modalChatbot.style.display = 'none';
            });
            
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'chatbot-options';
            optionsDiv.appendChild(cerrarButton);
            chatbotBody.appendChild(optionsDiv);
            
            chatbotBody.scrollTop = chatbotBody.scrollHeight;
        }
    
        function addMessage(text, type) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add(type);
            messageDiv.textContent = text;
            chatbotBody.appendChild(messageDiv);
        }
    }
    
    // 8. Secci√≥n de Mayoristas
    function initMayoristasSection() {
        const btnMayoristas = document.getElementById('btn-mayoristas');
        const productosSection = document.querySelector('.productos');
        const mayoristasSection = document.getElementById('mayoristas-section');
        let mayoristasActivo = false;
    
        btnMayoristas.addEventListener('click', function(e) {
            e.preventDefault();
            mayoristasActivo = !mayoristasActivo;
            
            if (mayoristasActivo) {
                productosSection.style.display = 'none';
                mayoristasSection.style.display = 'block';
                this.textContent = 'Volver a Productos';
                mayoristasSection.scrollIntoView({ behavior: 'smooth' });
            } else {
                productosSection.style.display = 'block';
                mayoristasSection.style.display = 'none';
                this.textContent = 'Mayoristas';
                productosSection.scrollIntoView({ behavior: 'smooth' });
            }
        });
    
        // Filtros para mayoristas
        const toggleFiltrosMayoristas = document.getElementById('toggle-filtros-mayoristas');
        const filtrosContenidoMayoristas = document.getElementById('filtros-contenido-mayoristas');
        
        toggleFiltrosMayoristas.addEventListener('click', () => {
            filtrosContenidoMayoristas.classList.toggle('activo');
            toggleFiltrosMayoristas.classList.toggle('activo');
        });
    
        // Selectores de cantidad
        document.querySelectorAll('.selector-cantidad').forEach(selector => {
            selector.addEventListener('change', function() {
                const precio = this.options[this.selectedIndex].dataset.precio;
                const producto = this.closest('.promocion');
                
                producto.querySelector('.precio-mayorista').textContent = `$${parseInt(precio).toLocaleString()}`;
                producto.dataset.precio = precio;
                
                updateNivelesPromo(this.value, producto);
            });
        });
    
        function updateNivelesPromo(opcionSeleccionada, producto) {
            const niveles = producto.querySelectorAll('.nivel-promo');
            niveles.forEach(nivel => nivel.classList.remove('active'));
            
            if (opcionSeleccionada.includes('+')) {
                const min = parseInt(opcionSeleccionada.replace('+', ''));
                const nivelActivo = [...niveles].find(nivel => 
                    parseInt(nivel.dataset.min) === min && !nivel.dataset.max
                );
                if (nivelActivo) nivelActivo.classList.add('active');
            } else {
                const [min, max] = opcionSeleccionada.split('-').map(Number);
                const nivelActivo = [...niveles].find(nivel => 
                    parseInt(nivel.dataset.min) === min && 
                    parseInt(nivel.dataset.max) === max
                );
                if (nivelActivo) nivelActivo.classList.add('active');
            }
        }
    
        // Filtrado para mayoristas
        const filtrosMayoristas = document.querySelectorAll('#filtros-contenido-mayoristas input');
        filtrosMayoristas.forEach(filtro => {
            filtro.addEventListener('change', aplicarFiltrosMayoristas);
        });
    
        function aplicarFiltrosMayoristas() {
            const filtros = {
                marcas: getCheckedValues('marca'),
                tipos: getCheckedValues('tipo'),
                especiales: getCheckedValues('especial'),
                precioMin: parseInt(document.getElementById('precio-min-mayoristas').value) || 0,
                precioMax: parseInt(document.getElementById('precio-max-mayoristas').value) || 1000000,
                volumenMin: parseInt(document.querySelector('#filtros-contenido-mayoristas input[name="volumen"]:checked').value) || 10
            };
    
            document.querySelectorAll('.promocion').forEach(promocion => {
                const cumpleFiltros = (
                    (filtros.marcas.length === 0 || filtros.marcas.includes(promocion.dataset.marca)) &&
                    (filtros.tipos.length === 0 || promocion.dataset.tipo.split(',').some(t => filtros.tipos.includes(t))) &&
                    (filtros.especiales.length === 0 || (promocion.dataset.especial && 
                    filtros.especiales.some(e => promocion.dataset.especial.includes(e)))) &&
                    (parseInt(promocion.dataset.precio) >= filtros.precioMin) &&
                    (parseInt(promocion.dataset.precio) <= filtros.precioMax) &&
                    promocion.dataset.volumen.split(',').includes(filtros.volumenMin.toString())
                );
    
                promocion.style.display = cumpleFiltros ? 'block' : 'none';
            });
        }
    
        function getCheckedValues(filterType) {
            return Array.from(document.querySelectorAll(`#filtros-contenido-mayoristas input[data-filtro="${filterType}"]:checked`))
                .map(el => el.value);
        }
    }
    

    // 9. Detalle del producto - Versi√≥n unificada
    function initProductDetailModal() {
    const modal = document.getElementById('modal-producto');
    
    // Evento para abrir modal
    document.querySelectorAll('.producto').forEach(producto => {
        producto.addEventListener('click', function(e) {
            if (!e.target.classList.contains('btn-producto') && 
                !e.target.classList.contains('cantidad-btn') && 
                e.target.tagName !== 'INPUT') {
                openProductDetail(this);
            }
        });
    });

    // Cerrar modal
    document.querySelector('.close-modal').addEventListener('click', () => modal.style.display = 'none');
    modal.addEventListener('click', (e) => {
        if (e.target === modal) modal.style.display = 'none';
    });

    function openProductDetail(producto) {
        // Obtener datos del producto
        const nombre = producto.querySelector('h3').textContent;
        const precio = producto.querySelector('.precio').textContent;
        const imgSrc = producto.querySelector('img').src;
        
        // Obtener descripci√≥n (de data-attribute o elemento oculto)
        const descripcion = producto.dataset.descripcion || 
        producto.querySelector('.descripcion-text')?.textContent || 
        'Descripci√≥n no disponible';
        
        // Configurar datos del modal
        document.getElementById('producto-imagen-detalle').src = imgSrc;
        document.getElementById('producto-titulo-detalle').textContent = nombre;
        document.getElementById('precio-actual').textContent = precio;
        document.getElementById('producto-descripcion-detalle').textContent = descripcion;
        
        // Configurar botones de cantidad
        const cantidadInput = document.getElementById('cantidad-producto');
        const decrementarBtn = document.querySelector('.producto-info .decrementar');
        const incrementarBtn = document.querySelector('.producto-info .incrementar');
        
        // Limpiar eventos anteriores
        const newDecrementar = decrementarBtn.cloneNode(true);
        const newIncrementar = incrementarBtn.cloneNode(true);
        decrementarBtn.replaceWith(newDecrementar);
        incrementarBtn.replaceWith(newIncrementar);
        
        // Configurar eventos
        newDecrementar.addEventListener('click', () => {
            let value = parseInt(cantidadInput.value);
            if (value > 1) {
                cantidadInput.value = value - 1;
            }
        });
        
        newIncrementar.addEventListener('click', () => {
            let value = parseInt(cantidadInput.value);
            cantidadInput.value = value + 1;
        });
        
        // Validar input
        cantidadInput.addEventListener('change', () => {
            let value = parseInt(cantidadInput.value);
            if (isNaN(value)) {
                cantidadInput.value = 1;
            } else if (value < 1) {
                cantidadInput.value = 1;
            }
        });
        
        // Configurar bot√≥n agregar
        const agregarBtn = document.getElementById('btn-agregar-detalle');
        agregarBtn.onclick = function() {
            const cantidad = parseInt(cantidadInput.value) || 1;
            
            // Usar la funci√≥n addToCart
            addToCart(nombre, precio, imgSrc, cantidad);
            
            // Animaci√≥n de confirmaci√≥n
            this.innerHTML = '<i class="fas fa-check"></i> Agregado';
            setTimeout(() => {
                this.innerHTML = '<i class="fas fa-shopping-bag"></i> Agregar a la bolsa';
                modal.style.display = 'none';
            }, 1500);
        };
        
        modal.style.display = 'flex';
    }
}
    
    </script>
    <script> // Funci√≥n de los botones 10+, 30+, 50+ ...
        document.querySelectorAll('.nivel-promo').forEach(boton => {
          boton.addEventListener('click', () => {
            const tarjeta = boton.closest('.promocion');
            const select = tarjeta.querySelector('.selector-cantidad');
            const precioMostrado = tarjeta.querySelector('.precio-mayorista');
        
            // Marcar el bot√≥n activo
            tarjeta.querySelectorAll('.nivel-promo').forEach(btn => btn.classList.remove('active'));
            boton.classList.add('active');
        
            // Obtener los datos del bot√≥n (rango m√≠nimo/m√°ximo)
            const min = parseInt(boton.dataset.min);
            const max = parseInt(boton.dataset.max || 999999);
        
            // Buscar opci√≥n correspondiente en el select
            let opcionCorrecta = null;
            for (let i = 0; i < select.options.length; i++) {
              const opcion = select.options[i];
              const texto = opcion.value;
              const precio = opcion.dataset.precio;
        
              // Extraer n√∫meros del texto como "10-29", "100+", etc.
              let [desde, hasta] = texto.split('-');
              desde = parseInt(desde);
              hasta = texto.includes('+') ? 999999 : parseInt(hasta);
        
              if (desde === min && hasta === max) {
                opcionCorrecta = opcion;
                break;
              }
            }
        
            // Si se encuentra la opci√≥n correcta, actualizar el precio
            if (opcionCorrecta) {
              select.value = opcionCorrecta.value;
              const nuevoPrecio = opcionCorrecta.dataset.precio;
              precioMostrado.textContent = `$${Number(nuevoPrecio).toLocaleString("es-CO")}`;
            }
          });
        });
    </script>
    <script>
        document.querySelectorAll('.mayoristas-section .btn-carrito').forEach(button => {
          button.addEventListener('click', function () {
            const tarjeta = button.closest('.promocion');
            const nombre = tarjeta.querySelector('h3')?.textContent?.trim() || "Producto mayorista";
            const imgSrc = tarjeta.querySelector('img')?.src || "img/noimage.png";
            const selector = tarjeta.querySelector('.selector-cantidad');
            const precio = selector?.selectedOptions[0]?.dataset?.precio || "0";
            const cantidadTexto = selector?.value || "10-29";
            const cantidad = parseInt(cantidadTexto.split('-')[0]) || 10;
      
            addToCart(nombre, `$${Number(precio).toLocaleString("es-CO")}`, imgSrc, cantidad);
      
            // Animaci√≥n opcional del bot√≥n
            button.innerHTML = '<i class="fas fa-check"></i> Agregado';
            setTimeout(() => {
              button.innerHTML = 'A√±adir al carrito';
            }, 1500);
          });
        });
    </script>
    // Secci√≥n de cotizaci√≥n
    
    <script>// Secci√≥n de cotizaci√≥n
        const cotizacion = JSON.parse(localStorage.getItem('cotizacion') || '[]');
      
        document.querySelectorAll('.mayoristas-section .btn-cotizacion').forEach(button => {
          button.addEventListener('click', function () {
            const tarjeta = button.closest('.promocion');
            const nombre = tarjeta.querySelector('h3')?.textContent?.trim();
            const selector = tarjeta.querySelector('.selector-cantidad');
            const precio = parseFloat(selector.selectedOptions[0].dataset.precio);
            const cantidad = parseInt(selector.value.split('-')[0]) || 10;
            const imagen = tarjeta.querySelector('img')?.src || "";
      
            const item = { nombre, precio, cantidad, imagen };
            cotizacion.push(item);
            localStorage.setItem('cotizacion', JSON.stringify(cotizacion));
            actualizarCotizacionContador();
      
            button.innerHTML = '<i class="fas fa-check"></i> A√±adido';
            setTimeout(() => { button.innerHTML = 'Solicitar Cotizaci√≥n'; }, 1500);
          });
        });
      
        function actualizarCotizacionContador() {
          const contador = document.querySelector('.cotizacion-count');
          contador.textContent = cotizacion.length;
          const icono = document.getElementById('iconoCotizacion');
          icono.classList.add('bounce');
          setTimeout(() => icono.classList.remove('bounce'), 500);
        }
      
        document.getElementById('iconoCotizacion').addEventListener('click', () => {
          const resumen = document.getElementById('resumenCotizacion');
          resumen.innerHTML = cotizacion.map((item, index) => `
            <p>
              <img src="${item.imagen}" alt=""> 
              ${item.nombre} x${item.cantidad} 
              <strong>$${(item.precio * item.cantidad).toLocaleString('es-CO')}</strong>
              <button onclick="eliminarCotizacion(${index})" title="Eliminar">&times;</button>
            </p>
          `).join('');
          calcularTotalCotizacion();
          document.getElementById('modalCotizacion').style.display = 'flex';
        });
      
        function eliminarCotizacion(index) {
          cotizacion.splice(index, 1);
          localStorage.setItem('cotizacion', JSON.stringify(cotizacion));
          document.getElementById('iconoCotizacion').click();
          actualizarCotizacionContador();
        }
      
        function calcularTotalCotizacion() {
          const total = cotizacion.reduce((acc, item) => acc + item.precio * item.cantidad, 0);
          document.getElementById('totalCotizacion').textContent = `$${total.toLocaleString('es-CO')}`;
        }
      
        function cerrarCotizacion() {
          document.getElementById('modalCotizacion').style.display = 'none';
        }
      
        document.getElementById('formCotizacion').addEventListener('submit', e => {
          e.preventDefault();
          if (cotizacion.length === 0) {
            alert("‚ö†Ô∏è Debes agregar al menos un producto a la cotizaci√≥n antes de enviarla.");
            return;
          }
          alert("üì© Tu cotizaci√≥n fue registrada. Te enviaremos los detalles al correo electr√≥nico.");
          cerrarCotizacion();
          cotizacion.length = 0;
          localStorage.removeItem('cotizacion');
          actualizarCotizacionContador();
          document.getElementById('formCotizacion').reset();
        });
      
        // Inicializar contador al cargar
        actualizarCotizacionContador();
    </script>
      
   
 
        
</body>
</html>